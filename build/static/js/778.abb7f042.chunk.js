"use strict";(self.webpackChunkvegetables=self.webpackChunkvegetables||[]).push([[778],{5778:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var l=t(2791),s=t(7689),i=t(9759),n=t(9574),r=t(9288),c=t(4581),d=t(8199),o=t(7106),h=t(2978),u=t(7668),x=t(6743),g=t(727),j=t(1320),m=t(184);const{usePatchBook:v,useDeleteBook:p}=n.bookQueries,y=()=>{const{id:e}=(0,s.UO)(),a=(0,s.s0)(),t=(0,l.useRef)(null),[n,h]=(0,l.useState)(""),[y,S]=(0,l.useState)(""),[_,I]=(0,l.useState)(0),[w,A]=(0,l.useState)(""),[P,z]=(0,l.useState)(!1),[B,U]=(0,l.useState)(""),[T,D]=(0,l.useState)([]),[E,H]=(0,l.useState)([]),[$,N]=(0,l.useState)(""),[Z,M]=(0,l.useState)(""),[W,F]=(0,l.useState)(!1),O=null!==e&&void 0!==e?e:"",{mutate:Q,status:R}=v(),{mutate:V}=p();(0,l.useEffect)((()=>{(async()=>{try{const s=await(0,g.v9)(O);var e,a,l;if(s)h(s.title||""),U(s.content||""),N(s.category||""),M(s.authorName||""),H(null===(e=s.images)||void 0===e?void 0:e.map((e=>e.id))),null===(a=t.current)||void 0===a||a.setPath(s.images[0].path),D(null===(l=s.images)||void 0===l?void 0:l.map((e=>e.path))),A(s.createdAt),S(s.user.name),I(s.clicks)}catch(s){alert("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{F(!1)}})()}),[O,h,U,N,M,H,D,F]),(0,l.useEffect)((()=>{""===O&&a(-1)}),[O,a]);const q=(0,l.useCallback)((e=>{h(e.target.value)}),[]),G=(0,l.useCallback)((e=>{U(e.target.value)}),[]),J=(0,l.useCallback)((e=>{N(e.target.value)}),[]),K=(0,l.useCallback)((e=>{M(e.target.value)}),[]);(0,l.useEffect)((()=>()=>{D([]),h(""),U(""),N(""),M(""),H([])}),[h,U,N,M,H,D]);const L=(0,l.useCallback)((async()=>{z(!0);try{var e;const a=(null===(e=t.current)||void 0===e?void 0:e.getFileData())||[];let l=E;if(a.length>0){const e=await(0,c.VC)(a);l=[...E,...e.imageIds],H(l)}Q({id:O,title:n,content:B,category:$,authorName:Z,images:l})}catch(l){alert("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{z(!1)}a("/admin")}),[Q,O,n,B,$,Z,E,a]),X=(0,l.useCallback)((()=>{V(O),a("/admin")}),[V,O,a]),Y=(0,l.useCallback)((async(e,a,t)=>{try{const l=await(0,c.ao)(e,a,t);alert(null===l||void 0===l?void 0:l.message)}catch(l){alert("\uc774\ubbf8\uc9c0 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}}),[]);return""===O?(0,m.jsx)("div",{children:"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 ID\uc785\ub2c8\ub2e4."}):W||P?(0,m.jsx)(j.E,{children:(0,m.jsx)(d.Z,{})}):(0,m.jsxs)(f,{children:[(0,m.jsxs)(k,{children:[(0,m.jsxs)(i.BH,{style:{gridArea:"data"},children:[(0,m.jsx)(b,{children:"\uc0dd\uc131\uc77c"}),(0,m.jsx)(C,{children:(0,u.Z)(w)})]}),(0,m.jsxs)(i.BH,{style:{gridArea:"data"},children:[(0,m.jsx)(b,{children:"\uc0dd\uc131\uc790"}),(0,m.jsx)(C,{children:y})]}),(0,m.jsxs)(i.BH,{style:{gridArea:"data"},children:[(0,m.jsx)(b,{children:"\uc870\ud68c\uc218"}),(0,m.jsx)(C,{children:_})]}),(0,m.jsxs)(i.BH,{style:{gridArea:"data"},children:[(0,m.jsx)(b,{children:"\uc791\uac00\uc774\ub984"}),(0,m.jsx)(C,{children:Z})]}),(0,m.jsxs)(i.BH,{style:{gridArea:"data"},children:[(0,m.jsx)(b,{children:"\uce74\ud14c\uace0\ub9ac"}),(0,m.jsx)(C,{children:$})]})]}),(0,m.jsxs)(i.W2,{style:{alignSelf:"flex-start",gridArea:"contain"},children:[(0,m.jsx)(i.MM,{children:(0,m.jsx)(i.Wr,{children:"\ucc45 \uc218\uc815\ud558\uae30"})}),(0,m.jsxs)(i.im,{children:[(0,m.jsxs)(i.UP,{children:[(0,m.jsx)(i.__,{style:{color:"black"},children:"\ub3c4\uc11c\uba85"}),(0,m.jsx)(i.II,{name:"title",placeholder:"Title",value:n,onChange:q})]}),(0,m.jsxs)(i.UP,{$marginTop:20,children:[(0,m.jsx)(i.__,{style:{color:"black"},children:"\uc124\uba85"}),(0,m.jsx)(i.gx,{name:"content",placeholder:"content",value:B,onChange:G})]}),(0,m.jsxs)(i.UP,{$marginTop:20,children:[(0,m.jsx)(i.__,{style:{color:"black"},children:"\uc800\uc790 \uc774\ub984"}),(0,m.jsx)(i.II,{name:"authorName",placeholder:"Author Name",value:Z,onChange:K})]}),(0,m.jsxs)(i.UP,{$marginTop:20,children:[(0,m.jsx)(i.__,{style:{color:"black"},children:"\uce74\ud14c\uace0\ub9ac"}),(0,m.jsxs)("select",{name:"category",value:$,onChange:J,children:[(0,m.jsx)("option",{value:"",children:"Select a category"}),x.Eg.map((e=>(0,m.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,m.jsxs)(i.UP,{$marginTop:20,children:[(0,m.jsx)(i.__,{style:{color:"black"},children:"\uc774\ubbf8\uc9c0"}),(0,m.jsx)(r.Z,{ref:t,imageIds:E,imagesSrc:T,bookId:e,handleDeleteImage:Y})]}),(0,m.jsxs)(i.UP,{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:30,gap:20},children:[(0,m.jsx)(o.zx,{onClick:L,status:R,children:"\uc218\uc815"}),(0,m.jsx)(i.zx,{onClick:X,$variant:"error",children:"\uc0ad\uc81c"})]})]})]})},f=h.zo.div`
  display: grid;
  grid-template-areas: 'data contain';
  width: 100%;
  height: 100%;
  gap: 30px;
`,k=h.zo.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
`,b=h.zo.div`
  font-weight: 500;
`,C=h.zo.div`
  margin-top: 8px;
  font-size: 14px;
`}}]);
//# sourceMappingURL=778.abb7f042.chunk.js.map